import{c as s,m as ie,I as ne,a as z,o as he,n as _e,t as m,i as e,H as $e,_ as Se,S as b,F as N,f as ee,M as ye,d as R,T as Ce,a2 as we,K as te,l as se,e as re,x as ke,g as Ie}from"./index-BTwf99OE.js";import{S as Le,C as ze,a as Ee}from"./send-DW334K0O.js";import{C as De}from"./chevron-down-BFO65stT.js";import{S as je}from"./search-BFmEHNBW.js";const Fe=[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]],Me=a=>s(ne,ie(a,{name:"FileCode",iconNode:Fe})),Ae=[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]],Oe=a=>s(ne,ie(a,{name:"Zap",iconNode:Ae}));var qe=m('<div class="flex gap-4"><div class="flex items-center gap-3 px-4 py-2 bg-secondary/50 rounded-lg border border-border/50"><div><div class="text-[10px] text-muted uppercase tracking-wider font-semibold">Arquivos</div><div class="text-sm font-mono font-bold"></div></div></div><div class="flex items-center gap-3 px-4 py-2 bg-secondary/50 rounded-lg border border-border/50"><div><div class="text-[10px] text-muted uppercase tracking-wider font-semibold">FunÃ§Ãµes</div><div class="text-sm font-mono font-bold"></div></div></div><div class="flex items-center gap-3 px-4 py-2 bg-secondary/50 rounded-lg border border-border/50"><div><div class="text-[10px] text-muted uppercase tracking-wider font-semibold">Status</div><div class="text-sm font-mono font-bold">'),Pe=m('<div class="flex justify-start"><div class="bg-card border rounded-2xl rounded-tl-none p-4 flex items-center gap-3"><div class="flex space-x-1"><div class="w-2 h-2 bg-primary/50 rounded-full animate-bounce [animation-delay:-0.3s]"></div><div class="w-2 h-2 bg-primary/50 rounded-full animate-bounce [animation-delay:-0.15s]"></div><div class="w-2 h-2 bg-primary/50 rounded-full animate-bounce"></div></div><span class="text-xs text-muted font-medium">Analisando cÃ³digo...'),Te=m('<div class="space-y-2 animate-in slide-in-from-top-2">'),He=m('<div class="pt-2 border-t border-border/10">Indexado: '),Ne=m('<div class="p-4 bg-blue-500/5 border border-blue-500/10 rounded-xl space-y-2"><div class="flex items-center gap-2 text-blue-600 font-bold text-sm">InformaÃ§Ãµes do Ãndice</div><div class="text-xs text-muted space-y-1"><div>ğŸ“ <!> arquivos</div><div>ğŸ“ <!> funÃ§Ãµes</div><div>ğŸ—ï¸ <!> classes</div><div>ğŸ’¾ <!> linhas'),Re=m('<div class="h-full flex flex-col bg-background max-w-[1800px] mx-auto"><div class="border-b bg-card/50 backdrop-blur-sm p-4 flex flex-col md:flex-row items-start md:items-center justify-between gap-4"><div><h2 class="text-xl font-bold flex items-center gap-2 text-foreground">Code Chat <span class="text-muted font-normal text-sm border-l pl-2 ml-2">Agente Fullstack</span></h2></div></div><div class="flex-1 overflow-hidden grid grid-cols-1 lg:grid-cols-[1fr_350px]"><div class="flex flex-col min-h-0 bg-background/50"><div class="flex-1 overflow-auto p-6 space-y-6"><div></div></div><div class="p-4 border-t bg-background/80 backdrop-blur-md"><form class="flex gap-3 max-w-4xl mx-auto"><button type=button class="btn btn-ghost btn-icon text-muted hover:text-destructive"title="Limpar HistÃ³rico"></button><div class="flex-1 relative"><input type=text class="input w-full pr-12 shadow-sm font-mono text-sm"placeholder="Pergunte sobre o cÃ³digo..."></div><button type=submit class="btn btn-primary shadow-md hover:shadow-lg transition-all"></button></form></div></div><div class="border-l bg-card/30 p-6 overflow-auto hidden lg:block"><div class="sticky top-0 space-y-8"><div class=space-y-4><button class="w-full flex items-center justify-between text-sm font-bold uppercase tracking-wider text-muted hover:text-foreground"><div class="flex items-center gap-2">Exemplos</div></button></div><div class="p-4 bg-yellow-500/5 border border-yellow-500/10 rounded-xl space-y-2"><div class="flex items-center gap-2 text-yellow-600 font-bold text-sm">Dicas de Uso</div><p class="text-xs text-muted leading-relaxed">FaÃ§a perguntas especÃ­ficas sobre o cÃ³digo, arquitetura, ou funcionalidades. O agente busca semanticamente em todo o projeto e fornece respostas contextualizadas.'),Ve=m('<div class="mt-4 pt-4 border-t border-border/10 space-y-2"><div class="text-xs font-bold text-muted uppercase tracking-wider mb-2">ğŸ“„ ReferÃªncias de CÃ³digo (<!>)'),Qe=m('<div class="mt-3 pt-2 border-t border-border/10">'),Ze=m('<div><div><div class="flex items-center gap-2 mb-2 opacity-70 border-b border-border/10 pb-2"><span class="text-xs font-bold uppercase tracking-wider"></span><span class="text-[10px] ml-auto"></span></div><div class="markdown-body text-sm leading-relaxed"style=background:transparent><pre class="whitespace-pre-wrap font-sans bg-transparent border-0 p-0 m-0 text-current">'),Be=m('<div class="bg-secondary/30 border rounded-lg p-3 text-xs font-mono"><div class="flex items-center justify-between mb-2"><span class="font-bold text-primary"></span><span class=text-muted>Score: <!>%</span></div><pre class="text-[11px] text-muted overflow-x-auto whitespace-pre-wrap">'),Je=m('<button class="w-full p-3 rounded-lg border border-border/50 hover:border-primary/50 hover:bg-secondary/50 transition-all text-left group"><div class="font-semibold text-sm group-hover:text-primary transition-colors mb-1 flex items-center gap-2"></div><div class="text-xs text-muted line-clamp-2">');function Xe(){const[a,$]=z([]),[E,M]=z(""),[w,V]=z(!1),[d,le]=z(null),[A,oe]=z(!0);let O;const ae=[{title:"Estrutura do CÃ³digo",prompt:"Quais sÃ£o os principais mÃ³dulos do backend?"},{title:"AutenticaÃ§Ã£o",prompt:"Como funciona o sistema de autenticaÃ§Ã£o?"},{title:"API Endpoints",prompt:"Liste todos os endpoints da API de chat"},{title:"Frontend Components",prompt:"Quais componentes SolidJS existem no projeto?"}];he(async()=>{try{const l=await se.get("/code-chat/stats");le(l.data);const o={id:"0",role:"assistant",content:`ğŸ¤– **OlÃ¡! Sou seu Agente Fullstack de CÃ³digo.**

Posso responder qualquer pergunta sobre este projeto:

- ğŸ“ **${l.data.total_files.toLocaleString()}** arquivos indexados
- ğŸ“ **${l.data.total_functions.toLocaleString()}** funÃ§Ãµes
- ğŸ—ï¸ **${l.data.total_classes.toLocaleString()}** classes
- ğŸ’» **${l.data.languages.join(", ")}**

FaÃ§a uma pergunta sobre o cÃ³digo!`,timestamp:new Date().toISOString()};$([o])}catch(l){console.error("Erro ao carregar stats:",l);const o={id:"0",role:"assistant",content:`âš ï¸ **Ãndice nÃ£o disponÃ­vel**

O Ã­ndice de cÃ³digo nÃ£o foi gerado ainda.

Execute: \`python scripts/index_codebase.py\``,timestamp:new Date().toISOString()};$([o])}}),_e(()=>{a()&&setTimeout(()=>O?.scrollIntoView({behavior:"smooth"}),100)});const de=async l=>{if(l?.preventDefault(),!E().trim()||w())return;const o={id:Date.now().toString(),role:"user",content:E(),timestamp:new Date().toISOString()};$([...a(),o]),M(""),V(!0);try{const f=await se.post("/code-chat/query",{message:o.content,history:a().slice(-5).map(k=>({role:k.role,content:k.content,timestamp:k.timestamp}))}),S={id:(Date.now()+1).toString(),role:"assistant",content:f.data.response,timestamp:f.data.metadata.timestamp,code_references:f.data.code_references};$([...a(),o,S])}catch(f){const S={id:Date.now().toString(),role:"assistant",content:`âŒ **Erro**: ${f.response?.data?.detail||f.message}`,timestamp:new Date().toISOString()};$([...a(),o,S])}finally{V(!1)}},ce=()=>{confirm("Deseja limpar o histÃ³rico?")&&$([a()[0]])},pe=l=>{M(l)};return(()=>{var l=Re(),o=l.firstChild,f=o.firstChild,S=f.firstChild,k=S.firstChild,ue=o.nextSibling,Q=ue.firstChild,D=Q.firstChild,j=D.firstChild,me=D.nextSibling,Z=me.firstChild,q=Z.firstChild,B=q.nextSibling,P=B.firstChild,J=B.nextSibling,ge=Q.nextSibling,K=ge.firstChild,T=K.firstChild,H=T.firstChild,U=H.firstChild,fe=U.firstChild,G=T.nextSibling,W=G.firstChild,xe=W.firstChild;e(S,s($e,{class:"text-primary"}),k),e(o,s(b,{get when(){return d()},get children(){var t=qe(),r=t.firstChild,i=r.firstChild,c=i.firstChild,g=c.nextSibling,v=r.nextSibling,h=v.firstChild,_=h.firstChild,n=_.nextSibling,p=v.nextSibling,u=p.firstChild,y=u.firstChild,x=y.nextSibling;return e(r,s(Me,{size:16,class:"text-blue-500"}),i),e(g,()=>d().total_files.toLocaleString()),e(v,s(Oe,{size:16,class:"text-purple-500"}),h),e(n,()=>d().total_functions.toLocaleString()),e(p,s(Se,{size:16,class:"text-green-500"}),u),e(x,()=>d().status==="ready"?"âœ… Pronto":"âš ï¸ Indexando"),t}}),null),e(D,s(N,{get each(){return a()},children:t=>(()=>{var r=Ze(),i=r.firstChild,c=i.firstChild,g=c.firstChild,v=g.nextSibling,h=c.nextSibling,_=h.firstChild;return e(g,()=>t.role==="user"?"VocÃª":"Agente"),e(v,()=>new Date(t.timestamp).toLocaleTimeString()),e(_,()=>t.content),e(i,s(b,{get when(){return ee(()=>!!t.code_references)()&&t.code_references.length>0},get children(){var n=Ve(),p=n.firstChild,u=p.firstChild,y=u.nextSibling;return y.nextSibling,e(p,()=>t.code_references.length,y),e(n,s(N,{get each(){return t.code_references},children:x=>(()=>{var I=Be(),F=I.firstChild,L=F.firstChild,C=L.nextSibling,be=C.firstChild,Y=be.nextSibling;Y.nextSibling;var ve=F.nextSibling;return e(L,()=>x.file),e(C,()=>(x.score*100).toFixed(1),Y),e(ve,()=>x.content),I})()}),null),n}}),null),e(i,s(b,{get when(){return t.role==="assistant"},get children(){var n=Qe();return e(n,s(ye,{get messageText(){return t.content},get messageId(){return t.id}})),n}}),null),R(n=>{var p=`flex ${t.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2`,u=`max-w-[85%] rounded-2xl p-5 shadow-sm ${t.role==="user"?"bg-primary/10 border border-primary/20 text-foreground rounded-tr-none":"bg-card border text-card-foreground rounded-tl-none"}`;return p!==n.e&&re(r,n.e=p),u!==n.t&&re(i,n.t=u),n},{e:void 0,t:void 0}),r})()}),j),e(D,s(b,{get when(){return w()},get children(){return Pe()}}),j);var X=O;return typeof X=="function"?ke(X,j):O=j,Z.addEventListener("submit",de),q.$$click=ce,e(q,s(Ce,{size:20})),P.$$input=t=>M(t.currentTarget.value),e(J,s(b,{get when(){return!w()},get fallback(){return s(ze,{size:20,class:"animate-spin"})},get children(){return s(Le,{size:20})}})),H.$$click=()=>oe(!A()),e(U,s(we,{size:14}),fe),e(H,(()=>{var t=ee(()=>!!A());return()=>t()?s(De,{size:14}):s(Ee,{size:14})})(),null),e(T,s(b,{get when(){return A()},get children(){var t=Te();return e(t,s(N,{each:ae,children:r=>(()=>{var i=Je(),c=i.firstChild,g=c.nextSibling;return i.$$click=()=>pe(r.prompt),e(c,s(je,{size:12}),null),e(c,()=>r.title,null),e(g,()=>r.prompt),i})()})),t}}),null),e(K,s(b,{get when(){return d()},get children(){var t=Ne(),r=t.firstChild,i=r.firstChild,c=r.nextSibling,g=c.firstChild,v=g.firstChild,h=v.nextSibling;h.nextSibling;var _=g.nextSibling,n=_.firstChild,p=n.nextSibling;p.nextSibling;var u=_.nextSibling,y=u.firstChild,x=y.nextSibling;x.nextSibling;var I=u.nextSibling,F=I.firstChild,L=F.nextSibling;return L.nextSibling,e(r,s(te,{size:16}),i),e(g,()=>d().total_files.toLocaleString(),h),e(_,()=>d().total_functions.toLocaleString(),p),e(u,()=>d().total_classes.toLocaleString(),x),e(I,()=>d().total_lines.toLocaleString(),L),e(c,s(b,{get when(){return d().indexed_at},get children(){var C=He();return C.firstChild,e(C,()=>new Date(d().indexed_at).toLocaleString(),null),C}}),null),t}}),G),e(W,s(te,{size:16}),xe),R(t=>{var r=w(),i=w()||!E().trim();return r!==t.e&&(P.disabled=t.e=r),i!==t.t&&(J.disabled=t.t=i),t},{e:void 0,t:void 0}),R(()=>P.value=E()),l})()}Ie(["click","input"]);export{Xe as default};
