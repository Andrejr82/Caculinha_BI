import{c as f,m as Ge,I as Je,t as z,a as D,i as x,S as M,F as fe,f as V,d as ee,k as dt,e as Re,g as Se,o as gt,n as ft,p as xt,q as kt,r as mt,T as bt,v as wt,X as yt,M as $t,w as _t,j as Be,x as vt}from"./index-BTwf99OE.js";import{P as Tt}from"./PlotlyChart-DkK15PvE.js";const St=[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],zt=a=>f(Je,Ge(a,{name:"Pencil",iconNode:St})),It=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]],Rt=a=>f(Je,Ge(a,{name:"StopCircle",iconNode:It}));var Ct=z("<div class=typing-indicator><span class=dot></span><span class=dot></span><span class=dot>");const Et=()=>Ct();var Mt=z('<div class="p-4 text-lg font-semibold text-card-foreground">'),At=z('<nav class="flex items-center justify-between p-4 border-t bg-gray-50"aria-label="Table navigation"><span class="text-sm font-normal text-gray-500">P√°gina <span class="font-semibold text-gray-900"></span> de <span class="font-semibold text-gray-900"></span></span><ul class="inline-flex -space-x-px text-sm h-8"><li><button class="flex items-center justify-center px-3 h-8 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed">Anterior</button></li><li><button class="flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed">Pr√≥xima'),Pt=z('<div class="overflow-x-auto rounded-lg border shadow-sm my-4"><table class="w-full text-sm text-left text-gray-500"><thead class="text-xs text-gray-700 uppercase bg-gray-50"><tr></tr></thead><tbody>'),Lt=z('<th scope=col class="px-6 py-3">'),Dt=z('<tr><td class="px-6 py-4 text-center text-gray-400">Nenhum dado dispon√≠vel.'),qt=z('<tr class="bg-white border-b hover:bg-gray-50">'),Bt=z('<td class="px-6 py-4">'),jt=z("<li><button>");const Ot=a=>{const[t,e]=D(1),n=a.itemsPerPage||10,r=()=>a.data(),i=()=>r().length===0?[]:Object.keys(r()[0]),s=()=>{const p=(t()-1)*n,h=p+n;return r().slice(p,h)},o=()=>Math.ceil(r().length/n),l=p=>{p>0&&p<=o()&&e(p)},d=()=>t()>1,u=()=>t()<o();return(()=>{var p=Pt(),h=p.firstChild,m=h.firstChild,q=m.firstChild,A=m.nextSibling;return x(p,f(M,{get when(){return a.caption},get children(){var v=Mt();return x(v,()=>a.caption),v}}),h),x(q,f(fe,{get each(){return i()},children:v=>(()=>{var R=Lt();return x(R,v),R})()})),x(A,f(M,{get when(){return r().length>0},get fallback(){return(()=>{var v=Dt(),R=v.firstChild;return ee(()=>dt(R,"colspan",i().length)),v})()},get children(){return f(fe,{get each(){return s()},children:v=>(()=>{var R=qt();return x(R,f(fe,{get each(){return i()},children:B=>(()=>{var P=Bt();return x(P,(()=>{var j=V(()=>typeof v[B]=="object"&&v[B]!==null);return()=>j()?JSON.stringify(v[B]):String(v[B])})()),P})()})),R})()})}})),x(p,f(M,{get when(){return o()>1},get children(){var v=At(),R=v.firstChild,B=R.firstChild,P=B.nextSibling,j=P.nextSibling,Z=j.nextSibling,be=R.nextSibling,ne=be.firstChild,pe=ne.firstChild,se=ne.nextSibling,le=se.firstChild;return x(P,t),x(Z,o),pe.$$click=()=>l(t()-1),x(be,f(fe,{get each(){return Array(o()).fill(0)},children:(F,U)=>(()=>{var re=jt(),he=re.firstChild;return he.$$click=()=>l(U()+1),x(he,()=>U()+1),ee(()=>Re(he,`flex items-center justify-center px-3 h-8 leading-tight ${t()===U()+1?"text-primary-foreground bg-primary border-primary hover:bg-primary-dark hover:text-primary-foreground":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700"}`)),re})()}),se),le.$$click=()=>l(t()+1),ee(F=>{var U=!d(),re=!u();return U!==F.e&&(pe.disabled=F.e=U),re!==F.t&&(le.disabled=F.t=re),F},{e:void 0,t:void 0}),v}}),null),p})()};Se(["click"]);var Nt=z('<div class="flex items-center space-x-2"><button class="text-green-500 hover:text-green-700"title="Gostei da resposta">üëç</button><button class="text-red-500 hover:text-red-700"title="N√£o gostei da resposta">üëé');const Zt=a=>{const t=e=>{a.onFeedback(a.messageId,e)};return(()=>{var e=Nt(),n=e.firstChild,r=n.nextSibling;return n.$$click=()=>t("positive"),r.$$click=()=>t("negative"),e})()};Se(["click"]);var Ut=z('<button class="btn btn-sm btn-outline"title="Baixar dados">');const Ft=a=>{const t=()=>{if(!a.data||a.data.length===0){alert("Nenhum dado para baixar.");return}try{const e=JSON.stringify(a.data,null,2),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=a.filename||"data.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}catch(e){console.error("Erro ao baixar dados:",e),alert("Erro ao baixar dados. Tente novamente.")}};return(()=>{var e=Ut();return e.$$click=t,x(e,()=>a.label||"Baixar Dados (JSON)"),e})()};Se(["click"]);function Ee(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let oe=Ee();function Xe(a){oe=a}const Ve=/[&<>"']/,Qt=new RegExp(Ve.source,"g"),We=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Ht=new RegExp(We.source,"g"),Gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},je=a=>Gt[a];function N(a,t){if(t){if(Ve.test(a))return a.replace(Qt,je)}else if(We.test(a))return a.replace(Ht,je);return a}const Jt=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Xt(a){return a.replace(Jt,(t,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const Vt=/(^|[^\[])\^/g;function $(a,t){let e=typeof a=="string"?a:a.source;t=t||"";const n={replace:(r,i)=>{let s=typeof i=="string"?i:i.source;return s=s.replace(Vt,"$1"),e=e.replace(r,s),n},getRegex:()=>new RegExp(e,t)};return n}function Oe(a){try{a=encodeURI(a).replace(/%25/g,"%")}catch{return null}return a}const xe={exec:()=>null};function Ne(a,t){const e=a.replace(/\|/g,(i,s,o)=>{let l=!1,d=s;for(;--d>=0&&o[d]==="\\";)l=!l;return l?"|":" |"}),n=e.split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function we(a,t,e){const n=a.length;if(n===0)return"";let r=0;for(;r<n&&a.charAt(n-r-1)===t;)r++;return a.slice(0,n-r)}function Wt(a,t){if(a.indexOf(t[1])===-1)return-1;let e=0;for(let n=0;n<a.length;n++)if(a[n]==="\\")n++;else if(a[n]===t[0])e++;else if(a[n]===t[1]&&(e--,e<0))return n;return-1}function Ze(a,t,e,n){const r=t.href,i=t.title?N(t.title):null,s=a[1].replace(/\\([\[\]])/g,"$1");if(a[0].charAt(0)!=="!"){n.state.inLink=!0;const o={type:"link",raw:e,href:r,title:i,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,o}return{type:"image",raw:e,href:r,title:i,text:N(s)}}function Kt(a,t){const e=a.match(/^(\s+)(?:```)/);if(e===null)return t;const n=e[1];return t.split(`
`).map(r=>{const i=r.match(/^\s+/);if(i===null)return r;const[s]=i;return s.length>=n.length?r.slice(n.length):r}).join(`
`)}class _e{options;rules;lexer;constructor(t){this.options=t||oe}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:we(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=Kt(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(/#$/.test(n)){const r=we(n,"#");(this.options.pedantic||!r||/ $/.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){const n=we(e[0].replace(/^ *>[ \t]?/gm,""),`
`),r=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(n);return this.lexer.state.top=r,{type:"blockquote",raw:e[0],tokens:i,text:n}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const s=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o="",l="",d=!1;for(;t;){let u=!1;if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;o=e[0],t=t.substring(o.length);let p=e[2].split(`
`,1)[0].replace(/^\t+/,R=>" ".repeat(3*R.length)),h=t.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,l=p.trimStart()):(m=e[2].search(/[^ ]/),m=m>4?1:m,l=p.slice(m),m+=e[1].length);let q=!1;if(!p&&/^ *$/.test(h)&&(o+=h+`
`,t=t.substring(h.length+1),u=!0),!u){const R=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),B=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),P=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),j=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;t;){const Z=t.split(`
`,1)[0];if(h=Z,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),P.test(h)||j.test(h)||R.test(h)||B.test(t))break;if(h.search(/[^ ]/)>=m||!h.trim())l+=`
`+h.slice(m);else{if(q||p.search(/[^ ]/)>=4||P.test(p)||j.test(p)||B.test(p))break;l+=`
`+h}!q&&!h.trim()&&(q=!0),o+=Z+`
`,t=t.substring(Z.length+1),p=h.slice(m)}}i.loose||(d?i.loose=!0:/\n *\n *$/.test(o)&&(d=!0));let A=null,v;this.options.gfm&&(A=/^\[[ xX]\] /.exec(l),A&&(v=A[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:o,task:!!A,checked:v,loose:!1,text:l,tokens:[]}),i.raw+=o}i.items[i.items.length-1].raw=o.trimEnd(),i.items[i.items.length-1].text=l.trimEnd(),i.raw=i.raw.trimEnd();for(let u=0;u<i.items.length;u++)if(this.lexer.state.top=!1,i.items[u].tokens=this.lexer.blockTokens(i.items[u].text,[]),!i.loose){const p=i.items[u].tokens.filter(m=>m.type==="space"),h=p.length>0&&p.some(m=>/\n.*\n/.test(m.raw));i.loose=h}if(i.loose)for(let u=0;u<i.items.length;u++)i.items[u].loose=!0;return i}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(/\s+/g," "),r=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:i}}}table(t){const e=this.rules.block.table.exec(t);if(!e||!/[:|]/.test(e[2]))return;const n=Ne(e[1]),r=e[2].replace(/^\||\| *$/g,"").split("|"),i=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const o of r)/^ *-+: *$/.test(o)?s.align.push("right"):/^ *:-+: *$/.test(o)?s.align.push("center"):/^ *:-+ *$/.test(o)?s.align.push("left"):s.align.push(null);for(const o of n)s.header.push({text:o,tokens:this.lexer.inline(o)});for(const o of i)s.rows.push(Ne(o,s.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return s}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:N(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const s=we(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{const s=Wt(e[2],"()");if(s>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],i=s[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(n)?r=r.slice(1):r=r.slice(1,-1)),Ze(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(/\s+/g," "),i=e[r.toLowerCase()];if(!i){const s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return Ze(n,i,n[0],this.lexer)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const s=[...r[0]].length-1;let o,l,d=s,u=0;const p=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,e=e.slice(-1*t.length+s);(r=p.exec(e))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(l=[...o].length,r[3]||r[4]){d+=l;continue}else if((r[5]||r[6])&&s%3&&!((s+l)%3)){u+=l;continue}if(d-=l,d>0)continue;l=Math.min(l,l+d+u);const h=[...r[0]][0].length,m=t.slice(0,s+r.index+h+l);if(Math.min(s,l)%2){const A=m.slice(1,-1);return{type:"em",raw:m,text:A,tokens:this.lexer.inlineTokens(A)}}const q=m.slice(2,-2);return{type:"strong",raw:m,text:q,tokens:this.lexer.inlineTokens(q)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(/\n/g," ");const r=/[^ ]/.test(n),i=/^ /.test(n)&&/ $/.test(n);return r&&i&&(n=n.substring(1,n.length-1)),n=N(n,!0),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=N(e[1]),r="mailto:"+n):(n=N(e[1]),r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let n,r;if(e[2]==="@")n=N(e[0]),r="mailto:"+n;else{let i;do i=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(i!==e[0]);n=N(e[0]),e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){let n;return this.lexer.state.inRawBlock?n=e[0]:n=N(e[0]),{type:"text",raw:e[0],text:n}}}}const Yt=/^(?: *(?:\n|$))+/,en=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,tn=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ke=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,nn=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ke=/(?:[*+-]|\d{1,9}[.)])/,Ye=$(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ke).getRegex(),Me=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,sn=/^[^\n]+/,Ae=/(?!\s*\])(?:\\.|[^\[\]\\])+/,rn=$(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Ae).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),on=$(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ke).getRegex(),ze="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Pe=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ln=$("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Pe).replace("tag",ze).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),et=$(Me).replace("hr",ke).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ze).getRegex(),an=$(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",et).getRegex(),Le={blockquote:an,code:en,def:rn,fences:tn,heading:nn,hr:ke,html:ln,lheading:Ye,list:on,newline:Yt,paragraph:et,table:xe,text:sn},Ue=$("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ke).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ze).getRegex(),cn={...Le,table:Ue,paragraph:$(Me).replace("hr",ke).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ue).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ze).getRegex()},un={...Le,html:$(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Pe).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:xe,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:$(Me).replace("hr",ke).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ye).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},tt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,pn=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,nt=/^( {2,}|\\)\n(?!\s*$)/,hn=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,me="\\p{P}$+<=>`^|~",dn=$(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,me).getRegex(),gn=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,fn=$(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,me).getRegex(),xn=$("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,me).getRegex(),kn=$("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,me).getRegex(),mn=$(/\\([punct])/,"gu").replace(/punct/g,me).getRegex(),bn=$(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),wn=$(Pe).replace("(?:-->|$)","-->").getRegex(),yn=$("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",wn).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ve=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$n=$(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",ve).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),st=$(/^!?\[(label)\]\[(ref)\]/).replace("label",ve).replace("ref",Ae).getRegex(),rt=$(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ae).getRegex(),_n=$("reflink|nolink(?!\\()","g").replace("reflink",st).replace("nolink",rt).getRegex(),De={_backpedal:xe,anyPunctuation:mn,autolink:bn,blockSkip:gn,br:nt,code:pn,del:xe,emStrongLDelim:fn,emStrongRDelimAst:xn,emStrongRDelimUnd:kn,escape:tt,link:$n,nolink:rt,punctuation:dn,reflink:st,reflinkSearch:_n,tag:yn,text:hn,url:xe},vn={...De,link:$(/^!?\[(label)\]\((.*?)\)/).replace("label",ve).getRegex(),reflink:$(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ve).getRegex()},Ce={...De,escape:$(tt).replace("])","~|])").getRegex(),url:$(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Tn={...Ce,br:$(nt).replace("{2,}","*").getRegex(),text:$(Ce.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ye={normal:Le,gfm:cn,pedantic:un},ge={normal:De,gfm:Ce,breaks:Tn,pedantic:vn};class W{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||oe,this.options.tokenizer=this.options.tokenizer||new _e,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:ye.normal,inline:ge.normal};this.options.pedantic?(e.block=ye.pedantic,e.inline=ge.pedantic):this.options.gfm&&(e.block=ye.gfm,this.options.breaks?e.inline=ge.breaks:e.inline=ge.gfm),this.tokenizer.rules=e}static get rules(){return{block:ye,inline:ge}}static lex(t,e){return new W(e).lex(t)}static lexInline(t,e){return new W(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const n=this.inlineQueue[e];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(o,l,d)=>l+"    ".repeat(d.length));let n,r,i,s;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(n=o.call({lexer:this},t,e))?(t=t.substring(n.raw.length),e.push(n),!0):!1))){if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length),n.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(i=t,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const l=t.slice(1);let d;this.options.extensions.startBlock.forEach(u=>{d=u.call({lexer:this},l),typeof d=="number"&&d>=0&&(o=Math.min(o,d))}),o<1/0&&o>=0&&(i=t.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){r=e[e.length-1],s&&r.type==="paragraph"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n),s=i.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&r.type==="text"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n);continue}if(t){const o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n,r,i,s=t,o,l,d;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,o.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(l||(d=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(n=u.call({lexer:this},t,e))?(t=t.substring(n.raw.length),e.push(n),!0):!1))){if(n=this.tokenizer.escape(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.tag(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(n=this.tokenizer.link(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(n.raw.length),r=e[e.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(n=this.tokenizer.emStrong(t,s,d)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.codespan(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.br(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.del(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.autolink(t)){t=t.substring(n.raw.length),e.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(t))){t=t.substring(n.raw.length),e.push(n);continue}if(i=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const p=t.slice(1);let h;this.options.extensions.startInline.forEach(m=>{h=m.call({lexer:this},p),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(i=t.substring(0,u+1))}if(n=this.tokenizer.inlineText(i)){t=t.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(d=n.raw.slice(-1)),l=!0,r=e[e.length-1],r&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return e}}class Te{options;constructor(t){this.options=t||oe}code(t,e,n){const r=(e||"").match(/^\S*/)?.[0];return t=t.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+N(r)+'">'+(n?t:N(t,!0))+`</code></pre>
`:"<pre><code>"+(n?t:N(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,e){return t}heading(t,e,n){return`<h${e}>${t}</h${e}>
`}hr(){return`<hr>
`}list(t,e,n){const r=e?"ol":"ul",i=e&&n!==1?' start="'+n+'"':"";return"<"+r+i+`>
`+t+"</"+r+`>
`}listitem(t,e,n){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+e+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,e){const n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,e,n){const r=Oe(t);if(r===null)return n;t=r;let i='<a href="'+t+'"';return e&&(i+=' title="'+e+'"'),i+=">"+n+"</a>",i}image(t,e,n){const r=Oe(t);if(r===null)return n;t=r;let i=`<img src="${t}" alt="${n}"`;return e&&(i+=` title="${e}"`),i+=">",i}text(t){return t}}class qe{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,n){return""+n}image(t,e,n){return""+n}br(){return""}}class K{options;renderer;textRenderer;constructor(t){this.options=t||oe,this.options.renderer=this.options.renderer||new Te,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new qe}static parse(t,e){return new K(e).parse(t)}static parseInline(t,e){return new K(e).parseInline(t)}parse(t,e=!0){let n="";for(let r=0;r<t.length;r++){const i=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const s=i,o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){n+=o||"";continue}}switch(i.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{const s=i;n+=this.renderer.heading(this.parseInline(s.tokens),s.depth,Xt(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":{const s=i;n+=this.renderer.code(s.text,s.lang,!!s.escaped);continue}case"table":{const s=i;let o="",l="";for(let u=0;u<s.header.length;u++)l+=this.renderer.tablecell(this.parseInline(s.header[u].tokens),{header:!0,align:s.align[u]});o+=this.renderer.tablerow(l);let d="";for(let u=0;u<s.rows.length;u++){const p=s.rows[u];l="";for(let h=0;h<p.length;h++)l+=this.renderer.tablecell(this.parseInline(p[h].tokens),{header:!1,align:s.align[h]});d+=this.renderer.tablerow(l)}n+=this.renderer.table(o,d);continue}case"blockquote":{const s=i,o=this.parse(s.tokens);n+=this.renderer.blockquote(o);continue}case"list":{const s=i,o=s.ordered,l=s.start,d=s.loose;let u="";for(let p=0;p<s.items.length;p++){const h=s.items[p],m=h.checked,q=h.task;let A="";if(h.task){const v=this.renderer.checkbox(!!m);d?h.tokens.length>0&&h.tokens[0].type==="paragraph"?(h.tokens[0].text=v+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&h.tokens[0].tokens[0].type==="text"&&(h.tokens[0].tokens[0].text=v+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:v+" "}):A+=v+" "}A+=this.parse(h.tokens,d),u+=this.renderer.listitem(A,q,!!m)}n+=this.renderer.list(u,o,l);continue}case"html":{const s=i;n+=this.renderer.html(s.text,s.block);continue}case"paragraph":{const s=i;n+=this.renderer.paragraph(this.parseInline(s.tokens));continue}case"text":{let s=i,o=s.tokens?this.parseInline(s.tokens):s.text;for(;r+1<t.length&&t[r+1].type==="text";)s=t[++r],o+=`
`+(s.tokens?this.parseInline(s.tokens):s.text);n+=e?this.renderer.paragraph(o):o;continue}default:{const s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return n}parseInline(t,e){e=e||this.renderer;let n="";for(let r=0;r<t.length;r++){const i=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const s=this.options.extensions.renderers[i.type].call({parser:this},i);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=s||"";continue}}switch(i.type){case"escape":{const s=i;n+=e.text(s.text);break}case"html":{const s=i;n+=e.html(s.text);break}case"link":{const s=i;n+=e.link(s.href,s.title,this.parseInline(s.tokens,e));break}case"image":{const s=i;n+=e.image(s.href,s.title,s.text);break}case"strong":{const s=i;n+=e.strong(this.parseInline(s.tokens,e));break}case"em":{const s=i;n+=e.em(this.parseInline(s.tokens,e));break}case"codespan":{const s=i;n+=e.codespan(s.text);break}case"br":{n+=e.br();break}case"del":{const s=i;n+=e.del(this.parseInline(s.tokens,e));break}case"text":{const s=i;n+=e.text(s.text);break}default:{const s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return n}}class $e{options;constructor(t){this.options=t||oe}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}class Sn{defaults=Ee();options=this.setOptions;parse=this.#e(W.lex,K.parse);parseInline=this.#e(W.lexInline,K.parseInline);Parser=K;Renderer=Te;TextRenderer=qe;Lexer=W;Tokenizer=_e;Hooks=$e;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(const r of t)switch(n=n.concat(e.call(this,r)),r.type){case"table":{const i=r;for(const s of i.header)n=n.concat(this.walkTokens(s.tokens,e));for(const s of i.rows)for(const o of s)n=n.concat(this.walkTokens(o.tokens,e));break}case"list":{const i=r;n=n.concat(this.walkTokens(i.items,e));break}default:{const i=r;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(s=>{const o=i[s].flat(1/0);n=n.concat(this.walkTokens(o,e))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const s=e.renderers[i.name];s?e.renderers[i.name]=function(...o){let l=i.renderer.apply(this,o);return l===!1&&(l=s.apply(this,o)),l}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=e[i.level];s?s.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),n.renderer){const i=this.defaults.renderer||new Te(this.defaults);for(const s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(s==="options")continue;const o=s,l=n.renderer[o],d=i[o];i[o]=(...u)=>{let p=l.apply(i,u);return p===!1&&(p=d.apply(i,u)),p||""}}r.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new _e(this.defaults);for(const s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const o=s,l=n.tokenizer[o],d=i[o];i[o]=(...u)=>{let p=l.apply(i,u);return p===!1&&(p=d.apply(i,u)),p}}r.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new $e;for(const s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(s==="options")continue;const o=s,l=n.hooks[o],d=i[o];$e.passThroughHooks.has(s)?i[o]=u=>{if(this.defaults.async)return Promise.resolve(l.call(i,u)).then(h=>d.call(i,h));const p=l.call(i,u);return d.call(i,p)}:i[o]=(...u)=>{let p=l.apply(i,u);return p===!1&&(p=d.apply(i,u)),p}}r.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(o){let l=[];return l.push(s.call(this,o)),i&&(l=l.concat(i.call(this,o))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return W.lex(t,e??this.defaults)}parser(t,e){return K.parse(t,e??this.defaults)}#e(t,e){return(n,r)=>{const i={...r},s={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const o=this.#t(!!s.silent,!!s.async);if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(l=>t(l,s)).then(l=>s.hooks?s.hooks.processAllTokens(l):l).then(l=>s.walkTokens?Promise.all(this.walkTokens(l,s.walkTokens)).then(()=>l):l).then(l=>e(l,s)).then(l=>s.hooks?s.hooks.postprocess(l):l).catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let l=t(n,s);s.hooks&&(l=s.hooks.processAllTokens(l)),s.walkTokens&&this.walkTokens(l,s.walkTokens);let d=e(l,s);return s.hooks&&(d=s.hooks.postprocess(d)),d}catch(l){return o(l)}}}#t(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+N(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}}const ie=new Sn;function w(a,t){return ie.parse(a,t)}w.options=w.setOptions=function(a){return ie.setOptions(a),w.defaults=ie.defaults,Xe(w.defaults),w};w.getDefaults=Ee;w.defaults=oe;w.use=function(...a){return ie.use(...a),w.defaults=ie.defaults,Xe(w.defaults),w};w.walkTokens=function(a,t){return ie.walkTokens(a,t)};w.parseInline=ie.parseInline;w.Parser=K;w.parser=K.parse;w.Renderer=Te;w.TextRenderer=qe;w.Lexer=W;w.lexer=W.lex;w.Tokenizer=_e;w.Hooks=$e;w.parse=w;w.options;w.setOptions;w.use;w.walkTokens;w.parseInline;K.parse;W.lex;var zn=z('<div class="bg-yellow-50 dark:bg-yellow-900/20 border-b border-yellow-200 dark:border-yellow-800 px-4 py-2 text-sm text-yellow-800 dark:text-yellow-200"><div class="flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-yellow-600 animate-pulse">'),In=z('<div class="bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 px-4 py-2 text-sm text-red-800 dark:text-red-200"><div class="flex items-center justify-between"><span>Desconectado. Verifique sua conex√£o.</span><button class="text-xs underline hover:no-underline">Tentar novamente'),Rn=z('<button class="flex items-center gap-2 px-3 py-2 text-sm rounded-lg bg-red-500 hover:bg-red-600 text-white transition-colors"title="Parar gera√ß√£o"><span>Parar'),Cn=z('<div class="absolute inset-0 flex flex-col w-full max-w-7xl mx-auto bg-background"><div class="flex items-center justify-between px-4 sm:px-6 py-3 sm:py-4 border-b bg-background/50 backdrop-blur"><h2 class="text-base sm:text-lg font-semibold">Chat BI</h2><div class="flex items-center gap-1 sm:gap-2"><button class="flex items-center gap-2 px-3 py-2 text-sm rounded-lg border hover:bg-muted transition-colors"title="Limpar conversa"><span>Limpar</span></button></div></div><div class="flex-1 overflow-auto px-4 sm:px-6 md:px-8 py-4 sm:py-6 space-y-4 sm:space-y-6"><div></div></div><div class="sticky bottom-0 left-0 right-0 px-4 sm:px-6 md:px-8 py-3 sm:py-4 border-t bg-background/95 backdrop-blur-sm pb-safe"><form class="flex gap-2 sm:gap-3 max-w-4xl mx-auto"><input type=text class="input flex-1 text-sm sm:text-base py-2.5 sm:py-3 px-3 sm:px-4"placeholder="Fa√ßa uma pergunta sobre os dados..."><button type=submit class="btn btn-primary px-4 sm:px-6 py-2.5 sm:py-3 text-sm sm:text-base font-medium whitespace-nowrap">Enviar'),Fe=z("<div class=markdown-body>"),En=z('<div class="inline-flex items-center gap-2 px-3 py-1 text-xs font-medium rounded-full bg-primary/10 border border-primary/20 text-primary animate-pulse mt-2 w-fit"><div class="w-2 h-2 rounded-full bg-primary animate-ping">'),Mn=z('<div class=space-y-2><textarea class="input w-full min-h-[80px] resize-y"autofocus></textarea><div class="flex gap-2"><button class="flex items-center gap-1 px-3 py-1 text-sm rounded bg-primary text-primary-foreground hover:opacity-90"><span>Salvar</span></button><button class="flex items-center gap-1 px-3 py-1 text-sm rounded border hover:bg-muted"><span>Cancelar'),An=z('<button class="flex items-center gap-1 px-2 py-1 mt-2 text-xs rounded hover:bg-primary/10 transition-colors"title="Editar mensagem"><span>Editar'),Pn=z('<div class="bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4"><div class="flex items-start gap-3"><div class="text-amber-600 dark:text-amber-400 mt-0.5"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class=flex-1><p class="text-sm font-medium text-amber-800 dark:text-amber-200 mb-1">Oops! Algo deu errado</p><p class="text-sm text-amber-700 dark:text-amber-300">'),Ln=z('<div class="flex items-center space-x-2 mt-2">'),Dn=z('<div><div><div class="text-xs text-muted-foreground mt-1">');const Qe=a=>a.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/on\w+="[^"]*"/gi,"").replace(/on\w+='[^']*'/gi,"");w.setOptions({gfm:!0,breaks:!0});const He=a=>{try{const t=w.parse(a);return Qe(t)}catch(t){return console.error("Erro ao renderizar Markdown:",t),Qe(a)}};function jn(){const[a,t]=D([{id:"0",role:"assistant",text:"Ol√°! Sou seu assistente de BI. Pergunte sobre vendas, produtos ou estoque.",timestamp:Date.now(),type:"text",response_id:"initial_greeting"}]),[e,n]=D(""),[r,i]=D(!1),[s,o]=D(!1),[l,d]=D(""),[u,p]=D(null),[h,m]=D(""),[q,A]=D(null),[v,R]=D(""),[B,P]=D(""),[j,Z]=D(null),[be,ne]=D(0),[pe,se]=D("disconnected"),le=5;let F,U;gt(async()=>{let k=localStorage.getItem("chat_session_id");k||(k=crypto.randomUUID(),localStorage.setItem("chat_session_id",k)),d(k);const g=localStorage.getItem("example_query");if(g){localStorage.removeItem("example_query");const I={id:Date.now().toString(),role:"user",text:g,timestamp:Date.now()};t(S=>[...S,I]),await ae(g)}}),ft(()=>{a(),U!==void 0&&clearTimeout(U),U=window.setTimeout(()=>{F&&F.scrollIntoView({behavior:"smooth",block:"end"})},100)}),xt(()=>{const k=u();k&&k.close();const g=j();g&&clearTimeout(g),U!==void 0&&clearTimeout(U)});const re=()=>{const k=u();k&&(console.log("‚èπÔ∏è Stopping generation..."),k.close(),p(null),i(!1),t(g=>{const I=g[g.length-1];return I&&I.role==="assistant"?g.slice(0,-1).concat({...I,text:I.text+`

_[Gera√ß√£o interrompida pelo usu√°rio]_`}):g}))},he=()=>{if(confirm("Tem certeza que deseja limpar toda a conversa?")){const k=j();k&&(clearTimeout(k),Z(null)),t([{id:"0",role:"assistant",text:"Ol√°! Sou seu assistente de BI. Pergunte sobre vendas, produtos ou estoque.",timestamp:Date.now(),type:"text",response_id:"initial_greeting"}]);const g=crypto.randomUUID();d(g),localStorage.setItem("chat_session_id",g),console.log("üóëÔ∏è Conversation cleared, new session:",g)}},it=()=>{const k=h();if(!k){console.warn("No last user message to regenerate");return}t(g=>{const I=g.filter(E=>E.role==="user"),S=I[I.length-1],C=g.findIndex(E=>E===S);return g.slice(0,C+1)}),console.log("üîÑ Regenerating response for:",k),ae(k)},ot=(k,g)=>{A(k),R(g)},lt=()=>{A(null),R("")},at=async k=>{const g=v().trim();if(!g)return;const I=a().findIndex(S=>S.id===k);I!==-1&&(t(S=>S.map(C=>C.id===k?{...C,text:g}:C)),t(S=>S.slice(0,I+1)),m(g),A(null),R(""),console.log("‚úèÔ∏è Message edited, reprocessing:",g),await ae(g))},ae=async k=>{const g=Be.token();if(!g){console.error("‚ùå Token n√£o encontrado");const E={id:Date.now().toString(),role:"assistant",text:"[Erro: Voc√™ n√£o est√° autenticado. Por favor, fa√ßa login novamente.]",timestamp:Date.now(),type:"error"};t(J=>[...J,E]);return}i(!0),o(!0);const I=window.setTimeout(()=>{P("Isso est√° demorando um pouco mais que o normal. Processando...")},15e3);Z(I);const S=(Date.now()+1).toString(),C={id:S,role:"assistant",text:"",timestamp:Date.now(),type:"text"};t(E=>[...E,C]);try{console.log("üì° Iniciando SSE com token:",g.substring(0,20)+"...","Session:",l());const E=new EventSource(`/api/v1/chat/stream?q=${encodeURIComponent(k)}&token=${encodeURIComponent(g)}&session_id=${l()}`);p(E);let J="",O=S;E.onmessage=Y=>{try{const y=JSON.parse(Y.data);if(s()&&y.type!=="tool_progress"&&y.type!=="keepalive"&&o(!1),y.done){console.log("‚úÖ Stream conclu√≠do");const _=j();_&&(clearTimeout(_),Z(null)),E.close(),p(null),i(!1),o(!1),P("");const T=crypto.randomUUID();t(L=>L.map(c=>c.id===O?{...c,response_id:T}:c)),ne(0),se("disconnected");return}if(y.type==="tool_progress"){const T={Pensando:"Analisando sua pergunta...",consultar_dados_flexivel:"Consultando o Data Lake...",consultar_dados_gerais:"Buscando informa√ß√µes gerais...",gerar_grafico_universal:"Gerando visualiza√ß√£o...","Processando resposta":"Finalizando an√°lise..."}[y.tool]||"Processando sua solicita√ß√£o...";P(T)}else if(y.type==="text")P("Escrevendo..."),t(_=>_.map(T=>{if(T.id===O){const L=T.text+y.text;return J=L,{...T,text:L}}return T}));else if(y.type==="chart"&&y.chart_spec){const _=(Date.now()+2).toString();t(T=>[...T,{id:_,role:"assistant",text:"Aqui est√° o gr√°fico que voc√™ pediu:",timestamp:Date.now(),type:"chart",chart_spec:y.chart_spec,response_id:btoa(JSON.stringify(y.chart_spec)).substring(0,16)}]),O=_}else if(y.type==="table"&&y.data){const _=(Date.now()+3).toString();t(T=>[...T,{id:_,role:"assistant",text:"Aqui est√£o os dados tabulares:",timestamp:Date.now(),type:"table",data:y.data,response_id:btoa(JSON.stringify(y.data)).substring(0,16)}]),O=_}else y.type==="final"&&y.text&&t(_=>_.map(T=>T.id===O?{...T,text:T.text+y.text,type:"text"}:T));if(y.error){console.error("‚ùå Erro do servidor:",y.error);const _=j();_&&(clearTimeout(_),Z(null));const T=y.error||"N√£o foi poss√≠vel processar sua solicita√ß√£o. Por favor, tente novamente.";t(L=>L.map(c=>c.id===O?{...c,text:T,type:"error"}:c)),E.close(),p(null),i(!1),o(!1),P("")}}catch(y){console.error("‚ùå SSE Parse Error",y)}},E.onerror=Y=>{console.error("‚ùå EventSource failed:",Y);const y=j();y&&(clearTimeout(y),Z(null)),E.close(),p(null);const _=be();if(_<le){const T=Math.min(1e3*Math.pow(2,_),3e4);console.log(`üîÑ Reconnecting in ${T}ms (attempt ${_+1}/${le})...`),se("connecting"),P(`Reconectando... (tentativa ${_+1}/${le})`),setTimeout(()=>{ne(_+1),ae(k)},T)}else console.error("‚ùå Max retries exceeded"),se("error"),i(!1),o(!1),P(""),t(T=>T.map(L=>L.id===O?{...L,text:L.text||"Conex√£o perdida ap√≥s m√∫ltiplas tentativas. Por favor, recarregue a p√°gina ou tente novamente mais tarde.",type:"error"}:L)),ne(0)}}catch(E){console.error("‚ùå Chat error:",E);const J=j();J&&(clearTimeout(J),Z(null)),i(!1),o(!1),P(""),t(O=>O.map(Y=>Y.id===S?{...Y,text:"N√£o foi poss√≠vel processar sua mensagem. Por favor, tente novamente.",type:"error"}:Y))}},ct=async k=>{if(k.preventDefault(),!e()||r())return;const g=e();n(""),m(g);const I={id:Date.now().toString(),role:"user",text:g,timestamp:Date.now()};t(S=>[...S,I]),await ae(g)},ut=async(k,g,I)=>{const S=Be.token();if(!S){console.error("‚ùå Token n√£o encontrado para feedback."),alert("Voc√™ n√£o est√° autenticado para enviar feedback.");return}try{const C=await fetch("/api/v1/chat/feedback",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({response_id:k,feedback_type:g,comment:I})});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);console.log(`Feedback ${g} enviado para ${k}`)}catch(C){console.error("Erro ao enviar feedback:",C),alert("Erro ao enviar feedback.")}};return(()=>{var k=Cn(),g=k.firstChild,I=g.firstChild,S=I.nextSibling,C=S.firstChild,E=C.firstChild,J=g.nextSibling,O=J.firstChild,Y=J.nextSibling,y=Y.firstChild,_=y.firstChild,T=_.nextSibling;x(k,f(M,{get when(){return pe()==="connecting"},get children(){var c=zn(),Q=c.firstChild;return Q.firstChild,x(Q,()=>B()||"Conectando...",null),c}}),g),x(k,f(M,{get when(){return pe()==="error"},get children(){var c=In(),Q=c.firstChild,te=Q.firstChild,H=te.nextSibling;return H.$$click=()=>{ne(0),se("disconnected");const G=h();G&&ae(G)},c}}),g),x(S,f(M,{get when(){return r()},get children(){var c=Rn(),Q=c.firstChild;return c.$$click=re,x(c,f(Rt,{size:16}),Q),c}}),C),x(S,f(kt,{messages:a,get sessionId(){return l()}}),C),x(S,f(mt,{messages:a,get sessionId(){return l()}}),C),C.$$click=he,x(C,f(bt,{size:16}),E),x(J,f(fe,{get each(){return a()},children:(c,Q)=>(()=>{var te=Dn(),H=te.firstChild,G=H.firstChild;return x(H,f(M,{get when(){return V(()=>c.role==="assistant"&&c.type==="chart")()&&c.chart_spec},get children(){return f(Tt,{chartSpec:()=>c.chart_spec})}}),G),x(H,f(M,{get when(){return V(()=>c.role==="assistant"&&c.type==="table")()&&c.data},get children(){return f(Ot,{data:()=>c.data||[],get caption(){return c.text}})}}),G),x(H,f(M,{get when(){return V(()=>c.role==="assistant")()&&c.type==="text"},get children(){return[(()=>{var b=Fe();return ee(()=>b.innerHTML=He(c.text+(r()&&c.id===a()[a().length-1].id?" ‚ñç":""))),b})(),f(M,{get when(){return V(()=>!!(s()&&c.id===a()[a().length-1].id))()&&c.text===""},get children(){return f(Et,{})}}),f(M,{get when(){return V(()=>!!(r()&&c.id===a()[a().length-1].id))()&&B()},get children(){var b=En();return b.firstChild,x(b,B,null),b}})]}}),G),x(H,f(M,{get when(){return c.role==="user"},get children(){return[f(M,{get when(){return q()===c.id},get fallback(){return(()=>{var b=Fe();return ee(()=>b.innerHTML=He(c.text)),b})()},get children(){var b=Mn(),X=b.firstChild,ce=X.nextSibling,ue=ce.firstChild,Ie=ue.firstChild,de=ue.nextSibling,pt=de.firstChild;return X.$$input=ht=>R(ht.currentTarget.value),ue.$$click=()=>at(c.id),x(ue,f(wt,{size:14}),Ie),de.$$click=lt,x(de,f(yt,{size:14}),pt),ee(()=>X.value=v()),b}}),f(M,{get when(){return V(()=>q()!==c.id)()&&!r()},get children(){var b=An(),X=b.firstChild;return b.$$click=()=>ot(c.id,c.text),x(b,f(zt,{size:12}),X),b}})]}}),G),x(H,f(M,{get when(){return c.type==="error"},get children(){var b=Pn(),X=b.firstChild,ce=X.firstChild,ue=ce.nextSibling,Ie=ue.firstChild,de=Ie.nextSibling;return x(de,()=>c.text),b}}),G),x(H,f(M,{get when(){return V(()=>c.role==="assistant")()&&!r()},get children(){return f($t,{get messageText(){return c.text},get messageId(){return c.id},get canRegenerate(){return V(()=>Q()===a().length-1)()&&h()!==""},onRegenerate:it})}}),G),x(H,f(M,{get when(){return V(()=>c.role==="assistant"&&!r())()&&c.response_id},get children(){var b=Ln();return x(b,f(Zt,{get messageId(){return c.response_id},onFeedback:ut}),null),x(b,f(M,{get when(){return c.data},get children(){return f(Ft,{get data(){return c.data},get filename(){return`data-${c.response_id}.json`}})}}),null),b}}),G),x(G,()=>_t(c.timestamp)),ee(b=>{var X=`flex ${c.role==="user"?"justify-end":"justify-start"}`,ce=`max-w-[85%] sm:max-w-[80%] md:max-w-[75%] rounded-lg p-3 sm:p-4 text-sm leading-relaxed shadow-sm ${c.role==="user"?"bg-primary/10 border border-primary/20 text-foreground":"bg-card border text-card-foreground"}`;return X!==b.e&&Re(te,b.e=X),ce!==b.t&&Re(H,b.t=ce),b},{e:void 0,t:void 0}),te})()}),O);var L=F;return typeof L=="function"?vt(L,O):F=O,y.addEventListener("submit",ct),_.$$input=c=>n(c.currentTarget.value),ee(c=>{var Q=r(),te=r()||!e();return Q!==c.e&&(_.disabled=c.e=Q),te!==c.t&&(T.disabled=c.t=te),c},{e:void 0,t:void 0}),ee(()=>_.value=e()),k})()}Se(["click","input"]);export{jn as default};
