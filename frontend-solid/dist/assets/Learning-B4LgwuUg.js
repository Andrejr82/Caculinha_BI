import{c as t,m as fe,I as me,a as A,o as Re,t as n,i as e,A as J,S as c,f as De,j as Ne,F as T,d as K,B as Ze,l as O,k as he,e as q,g as Fe}from"./index-BTwf99OE.js";import{T as Le}from"./trending-up-Bq2ldSGv.js";import{B as xe}from"./bar-chart-3-XZbit7Hz.js";import{S as be}from"./search-BFmEHNBW.js";const Oe=[["path",{d:"M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0-1.32 4.24 3 3 0 0 0 .34 5.58 2.5 2.5 0 0 0 2.96 3.08 2.5 2.5 0 0 0 4.91.05L12 20V4.5Z",key:"ixwj2a"}],["path",{d:"M16 8V5c0-1.1.9-2 2-2",key:"13dx7u"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M20.5 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1s25gz"}],["path",{d:"M16.5 13a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"127460"}],["path",{d:"M20.5 21a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"fys062"}],["path",{d:"M18.5 3a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1vib61"}]],W=h=>t(me,fe(h,{name:"BrainCircuit",iconNode:Oe})),qe=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]],Ue=h=>t(me,fe(h,{name:"ThumbsUp",iconNode:qe}));var Qe=n('<div class="card p-4 border-red-500 bg-red-500/10"><div class="flex items-center gap-2 text-red-500"><span>'),Ve=n('<div class="flex-1 flex items-center justify-center"><div class=text-center><p class=text-muted>Carregando dados...'),Ge=n('<button class="w-full py-2 px-4 rounded-lg bg-red-500/10 text-red-500 border border-red-500/20 hover:bg-red-500 hover:text-white transition-all text-xs font-bold">RESETAR DADOS DE APRENDIZADO'),He=n('<div class="card border"><div class="p-4 border-b"><h3 class=font-semibold>Queries Problem√°ticas (Top 10)</h3><p class="text-sm text-muted">Queries que receberam feedback negativo</p></div><div class=overflow-x-auto><table class=w-full><thead class=bg-muted/50><tr class="text-left text-xs font-medium text-muted uppercase"><th class=p-3>Query</th><th class=p-3>Tipo</th><th class=p-3>Timestamp</th></tr></thead><tbody class=divide-y>'),Je=n('<div class=space-y-6><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4 border"><div class="text-sm text-muted mb-1">Total de Feedback</div><div class="text-2xl font-bold"></div></div><div class="card p-4 border border-green-500/30 bg-green-500/5"><div class="text-sm text-muted mb-1">Positivos</div><div class="text-2xl font-bold text-green-500"></div></div><div class="card p-4 border border-red-500/30 bg-red-500/5"><div class="text-sm text-muted mb-1">Negativos</div><div class="text-2xl font-bold text-red-500"></div></div><div class="card p-4 border border-yellow-500/30 bg-yellow-500/5"><div class="text-sm text-muted mb-1">Parciais</div><div class="text-2xl font-bold text-yellow-500"></div></div></div><div class="card p-8 border bg-gradient-to-br from-card to-muted/20 relative overflow-hidden group"><div class="absolute -right-10 -top-10 opacity-5 group-hover:opacity-10 transition-opacity"></div><h3 class="font-bold text-lg mb-8 flex items-center gap-2">Performance da Intelig√™ncia</h3><div class="flex flex-col md:flex-row items-center justify-around gap-8"><div class="relative w-48 h-48"><svg class="w-full h-full"viewBox="0 0 36 36"><path class="text-muted stroke-current"stroke-width=3 fill=none d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path><path stroke-width=3 stroke-linecap=round fill=none d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path></svg><div class="absolute inset-0 flex flex-col items-center justify-center"><span>%</span><span class="text-[10px] uppercase font-bold text-muted-foreground tracking-widest">Acur√°cia</span></div></div><div class="flex-1 space-y-4"><div class="p-4 rounded-xl bg-background/50 border border-dashed"><h4 class="text-sm font-bold mb-2 uppercase text-muted-foreground">Estado do Aprendizado</h4><p class="text-sm italic text-foreground">'),Ke=n('<div class=space-y-6><div class="card p-6 border"><div class="text-sm text-muted mb-1">Total de Erros</div><div class="text-4xl font-bold text-red-500"></div></div><div class="card p-6 border"><h3 class="font-semibold mb-4 flex items-center gap-2">Tipos de Erro</h3><div class=space-y-3></div></div><div class="card border"><div class="p-4 border-b"><h3 class=font-semibold>Detalhes e Sugest√µes</h3></div><div class=divide-y>'),We=n('<div class="card p-12 text-center border-dashed"><p class=text-muted>Nenhum padr√£o encontrado'),Xe=n('<div class=space-y-6><div class="flex gap-2"><div class="flex-1 relative"><input type=text class="input pl-10 w-full"placeholder="Buscar padr√µes por palavra-chave..."></div><button class="btn btn-primary">Buscar</button></div><div class="card p-4 border"><div class="text-sm text-muted mb-1">Padr√µes Identificados</div><div class="text-2xl font-bold"></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4">'),Ye=n('<div class="flex flex-col h-full p-6 gap-6"><div><h2 class="text-2xl font-bold flex items-center gap-2">Sistema de Aprendizado</h2><p class=text-muted>An√°lise de feedback, erros e padr√µes de uso do assistente BI</p></div><div class=border-b><div class="flex gap-1"><button><div class="flex items-center gap-2">Feedback</div></button><button><div class="flex items-center gap-2">Erros</div></button><button><div class="flex items-center gap-2">Padr√µes'),et=n('<tr class=hover:bg-muted/30><td class="p-3 text-sm"></td><td class=p-3><span class="px-2 py-1 bg-red-500/10 text-red-500 text-xs rounded"></span></td><td class="p-3 text-sm text-muted font-mono">'),tt=n('<div><div class="flex justify-between text-sm mb-1"><span class=font-medium></span><span class=text-muted> (<!>%)</span></div><div class="h-2 bg-muted rounded-full overflow-hidden"><div class="h-full bg-red-500">'),rt=n('<div class=p-4><div class="flex items-start gap-3"><div class="p-2 bg-red-500/10 rounded"></div><div class=flex-1><div class="font-medium mb-1"></div><div class="text-sm text-muted mb-2"> ocorr√™ncias</div><div class="text-sm bg-blue-500/10 text-blue-400 p-2 rounded">üí° '),st=n('<div class="card p-4 border hover:border-primary/50 transition-colors"><div class="flex items-start justify-between mb-3"><h4 class=font-semibold></h4><span class="px-2 py-1 bg-primary/10 text-primary text-xs rounded"> sucessos</span></div><div class=mb-3><div class="text-xs text-muted mb-1">Palavras-chave:</div><div class="flex flex-wrap gap-1"></div></div><div><div class="text-xs text-muted mb-1">Exemplos:</div><ul class="text-sm space-y-1">'),lt=n('<span class="px-2 py-0.5 bg-secondary text-xs rounded">'),it=n('<li class="text-muted italic">‚Ä¢ ');function ct(){const[h,U]=A("feedback"),[X,Y]=A(!0),[ee,te]=A(null),[o,ge]=A(null),[M,$e]=A(null),[B,re]=A(null),[Q,_e]=A(""),se=async()=>{Y(!0),te(null);try{const[s,I,R]=await Promise.all([O.get("/learning/feedback-stats"),O.get("/learning/error-analysis"),O.get("/learning/patterns")]);ge(s.data),$e(I.data),re(R.data)}catch(s){console.error("Erro ao carregar dados de aprendizado:",s),te(s.response?.data?.detail||"Erro ao carregar dados")}finally{Y(!1)}},le=async()=>{if(!Q()){se();return}try{const s=await O.get(`/learning/patterns?search=${encodeURIComponent(Q())}`);re(s.data)}catch(s){console.error("Erro ao buscar padr√µes:",s)}};Re(()=>{se()});const ie=s=>s>=80?"text-green-500":s>=60?"text-yellow-500":"text-red-500";return(()=>{var s=Ye(),I=s.firstChild,R=I.firstChild,ye=R.firstChild,ae=I.nextSibling,Ce=ae.firstChild,D=Ce.firstChild,de=D.firstChild,Se=de.firstChild,N=D.nextSibling,ne=N.firstChild,ke=ne.firstChild,V=N.nextSibling,oe=V.firstChild,we=oe.firstChild;return e(R,t(W,{size:28}),ye),e(s,t(c,{get when(){return ee()},get children(){var r=Qe(),l=r.firstChild,i=l.firstChild;return e(l,t(J,{size:20}),i),e(i,ee),r}}),ae),D.$$click=()=>U("feedback"),e(de,t(Ue,{size:16}),Se),N.$$click=()=>U("errors"),e(ne,t(J,{size:16}),ke),V.$$click=()=>U("patterns"),e(oe,t(Le,{size:16}),we),e(s,t(c,{get when(){return X()},get children(){var r=Ve(),l=r.firstChild,i=l.firstChild;return e(l,t(W,{size:48,class:"mx-auto mb-4 opacity-50 animate-pulse"}),i),r}}),null),e(s,t(c,{get when(){return!X()},get children(){return[t(c,{get when(){return h()==="feedback"},get children(){return t(c,{get when(){return o()},get children(){var r=Je(),l=r.firstChild,i=l.firstChild,u=i.firstChild,E=u.nextSibling,$=i.nextSibling,P=$.firstChild,j=P.nextSibling,z=$.nextSibling,a=z.firstChild,C=a.nextSibling,x=z.nextSibling,b=x.firstChild,S=b.nextSibling,_=l.nextSibling,f=_.firstChild,p=f.nextSibling,m=p.firstChild,y=p.nextSibling,g=y.firstChild,k=g.firstChild,w=k.firstChild,v=w.nextSibling,Ae=k.nextSibling,G=Ae.firstChild,Ee=G.firstChild,ce=g.nextSibling,ze=ce.firstChild,Te=ze.firstChild,Me=Te.nextSibling;return e(E,()=>o().total_feedback),e(j,()=>o().positive),e(C,()=>o().negative),e(S,()=>o().partial),e(f,t(W,{size:200})),e(p,t(xe,{size:20,class:"text-primary"}),m),e(G,()=>o().success_rate,Ee),e(Me,(()=>{var d=De(()=>o().success_rate>=80);return()=>d()?"A IA est√° operando com alta precis√£o t√©cnica. Os padr√µes identificados s√£o robustos.":o().success_rate>=50?"O sistema est√° em fase de refinamento. Continue fornecendo feedback para melhorar a acur√°cia.":"A IA requer ajustes nos prompts base. Grande volume de feedbacks negativos detectados."})()),e(ce,t(c,{get when(){return Ne.user()?.role==="admin"},get children(){var d=Ge();return d.$$click=()=>{confirm("Deseja realmente limpar todo o hist√≥rico de aprendizado? Esta a√ß√£o √© irrevers√≠vel.")&&alert("Comando de reset enviado com sucesso.")},d}}),null),e(r,t(c,{get when(){return o().problematic_queries.length>0},get children(){var d=He(),Z=d.firstChild,F=Z.nextSibling,L=F.firstChild,Pe=L.firstChild,je=Pe.nextSibling;return e(je,t(T,{get each(){return o().problematic_queries},children:H=>(()=>{var ue=et(),pe=ue.firstChild,ve=pe.nextSibling,Be=ve.firstChild,Ie=ve.nextSibling;return e(pe,()=>H.query),e(Be,()=>H.feedback_type),e(Ie,()=>H.timestamp),ue})()})),d}}),null),K(d=>{var Z=`${ie(o().success_rate)} stroke-current transition-all duration-1000 ease-out`,F=`${o().success_rate}, 100`,L=`text-4xl font-black ${ie(o().success_rate)}`;return Z!==d.e&&he(v,"class",d.e=Z),F!==d.t&&he(v,"stroke-dasharray",d.t=F),L!==d.a&&q(G,d.a=L),d},{e:void 0,t:void 0,a:void 0}),r}})}}),t(c,{get when(){return h()==="errors"},get children(){return t(c,{get when(){return M()},get children(){var r=Ke(),l=r.firstChild,i=l.firstChild,u=i.nextSibling,E=l.nextSibling,$=E.firstChild,P=$.firstChild,j=$.nextSibling,z=E.nextSibling,a=z.firstChild,C=a.nextSibling;return e(u,()=>M().total_errors),e($,t(xe,{size:20}),P),e(j,t(T,{get each(){return Object.entries(M().error_types)},children:([x,b])=>{const S=M().total_errors,_=b/S*100;return(()=>{var f=tt(),p=f.firstChild,m=p.firstChild,y=m.nextSibling,g=y.firstChild,k=g.nextSibling;k.nextSibling;var w=p.nextSibling,v=w.firstChild;return e(m,x),e(y,b,g),e(y,()=>_.toFixed(1),k),Ze(v,"width",`${_}%`),f})()}})),e(C,t(T,{get each(){return M().error_details},children:x=>(()=>{var b=rt(),S=b.firstChild,_=S.firstChild,f=_.nextSibling,p=f.firstChild,m=p.nextSibling,y=m.firstChild,g=m.nextSibling;return g.firstChild,e(_,t(J,{size:20,class:"text-red-500"})),e(p,()=>x.error_type),e(m,()=>x.count,y),e(g,()=>x.suggestion,null),b})()})),r}})}}),t(c,{get when(){return h()==="patterns"},get children(){return t(c,{get when(){return B()},get children(){var r=Xe(),l=r.firstChild,i=l.firstChild,u=i.firstChild,E=i.nextSibling,$=l.nextSibling,P=$.firstChild,j=P.nextSibling,z=$.nextSibling;return e(i,t(be,{size:20,class:"absolute left-3 top-1/2 -translate-y-1/2 text-muted"}),u),u.addEventListener("keypress",a=>a.key==="Enter"&&le()),u.$$input=a=>_e(a.currentTarget.value),E.$$click=le,e(j,()=>B().total_patterns),e(z,t(T,{get each(){return B().patterns},children:a=>(()=>{var C=st(),x=C.firstChild,b=x.firstChild,S=b.nextSibling,_=S.firstChild,f=x.nextSibling,p=f.firstChild,m=p.nextSibling,y=f.nextSibling,g=y.firstChild,k=g.nextSibling;return e(b,()=>a.pattern),e(S,()=>a.success_count,_),e(m,t(T,{get each(){return a.keywords},children:w=>(()=>{var v=lt();return e(v,w),v})()})),e(k,t(T,{get each(){return a.examples},children:w=>(()=>{var v=it();return v.firstChild,e(v,w,null),v})()})),C})()})),e(r,t(c,{get when(){return B().patterns.length===0},get children(){var a=We(),C=a.firstChild;return e(a,t(be,{size:48,class:"mx-auto mb-4 opacity-20"}),C),a}}),null),K(()=>u.value=Q()),r}})}})]}}),null),K(r=>{var l=`px-4 py-2 font-medium transition-colors ${h()==="feedback"?"border-b-2 border-primary text-primary":"text-muted hover:text-foreground"}`,i=`px-4 py-2 font-medium transition-colors ${h()==="errors"?"border-b-2 border-primary text-primary":"text-muted hover:text-foreground"}`,u=`px-4 py-2 font-medium transition-colors ${h()==="patterns"?"border-b-2 border-primary text-primary":"text-muted hover:text-foreground"}`;return l!==r.e&&q(D,r.e=l),i!==r.t&&q(N,r.t=i),u!==r.a&&q(V,r.a=u),r},{e:void 0,t:void 0,a:void 0}),s})()}Fe(["click","input"]);export{ct as default};
