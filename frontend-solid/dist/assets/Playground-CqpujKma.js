import{c as s,m as lt,I as nt,a as i,o as ot,n as dt,t as g,i as t,G as ct,f as xe,H as ve,d as f,S as v,J as pt,F as he,M as mt,T as ut,K as gt,X as ft,l as $e,e as ye,x as bt,k as xt,g as vt}from"./index-BTwf99OE.js";import{C as _e,a as ht,S as $t}from"./send-DW334K0O.js";import{S as we,P as yt}from"./settings-qjvp6htu.js";import{C as _t}from"./chevron-down-BFO65stT.js";const wt=[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]],Ce=d=>s(nt,lt(d,{name:"Cpu",iconNode:wt}));var Ct=g('<div class="p-4 pt-0 animate-in slide-in-from-top-2"><textarea class="input w-full min-h-[100px] font-mono text-sm bg-background"placeholder="Ex: Você é um assistente especialista em análise de dados. Responda sempre em JSON.">'),St=g('<div class="h-full flex flex-col items-center justify-center text-muted gap-6 animate-in fade-in zoom-in duration-500"><div class="p-6 bg-secondary/30 rounded-full"></div><div class="text-center max-w-md space-y-2"><h3 class="text-xl font-bold text-foreground">Playground de Desenvolvimento</h3><p>Defina uma persona, configure os parâmetros e teste prompts complexos antes de implementar.</p></div><div class="grid grid-cols-1 md:grid-cols-3 gap-3 w-full max-w-4xl mt-4">'),kt=g('<div class="flex justify-start"><div class="bg-card border rounded-2xl rounded-tl-none p-4 flex items-center gap-3"><div class="flex space-x-1"><div class="w-2 h-2 bg-primary/50 rounded-full animate-bounce [animation-delay:-0.3s]"></div><div class="w-2 h-2 bg-primary/50 rounded-full animate-bounce [animation-delay:-0.15s]"></div><div class="w-2 h-2 bg-primary/50 rounded-full animate-bounce"></div></div><span class="text-xs text-muted font-medium">Gerando resposta...'),Mt=g('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4"><div class="bg-card w-full max-w-2xl rounded-xl shadow-2xl border animate-in zoom-in-95"><div class="flex items-center justify-between p-4 border-b"><h3 class="font-bold flex items-center gap-2"> Snippet de Integração</h3><button class="btn btn-ghost btn-icon btn-sm"></button></div><div class="p-0 overflow-hidden"><pre class="bg-secondary/50 p-4 text-xs font-mono overflow-x-auto text-foreground"></pre></div><div class="p-4 border-t flex justify-end gap-2"><button class="btn btn-outline">Fechar</button><button class="btn btn-primary">Copiar Código'),zt=g('<div class="h-full flex flex-col bg-background max-w-[1800px] mx-auto relative"><div class="border-b bg-card/50 backdrop-blur-sm p-4 flex flex-col md:flex-row items-start md:items-center justify-between gap-4 z-10"><div><h2 class="text-xl font-bold flex items-center gap-2 text-foreground">Playground <span class="text-muted font-normal text-sm border-l pl-2 ml-2">Ambiente de Desenvolvimento</span></h2></div><div class="flex gap-4"><div class="flex items-center gap-3 px-4 py-2 bg-secondary/50 rounded-lg border border-border/50"><div><div class="text-[10px] text-muted uppercase tracking-wider font-semibold">Latência</div><div class="text-sm font-mono font-bold"></div></div></div><div class="flex items-center gap-3 px-4 py-2 bg-secondary/50 rounded-lg border border-border/50"><div><div class="text-[10px] text-muted uppercase tracking-wider font-semibold">Modelo</div><div class="text-sm font-mono font-bold"></div></div></div><button class="btn btn-outline gap-2"title="Ver Código"> <span class="hidden md:inline">Ver Código</span></button></div></div><div class="flex-1 overflow-hidden grid grid-cols-1 lg:grid-cols-[1fr_350px]"><div class="flex flex-col min-h-0 bg-background/50 relative"><div class="border-b bg-card/20 transition-all duration-300"><button class="w-full flex items-center justify-between p-3 text-xs font-bold uppercase tracking-wider text-muted hover:bg-card/40"><div class="flex items-center gap-2"> Instruções do Sistema (Persona)</div></button></div><div class="flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth"><div></div></div><div class="p-4 border-t bg-background/80 backdrop-blur-md"><form class="flex gap-3 max-w-4xl mx-auto"><button type=button class="btn btn-ghost btn-icon text-muted hover:text-destructive"title="Limpar Histórico"></button><div class="flex-1 relative"><input type=text class="input w-full pr-12 shadow-sm font-mono text-sm"placeholder="Digite sua mensagem..."></div><button type=submit class="btn btn-primary shadow-md hover:shadow-lg transition-all"></button></form></div></div><div class="border-l bg-card/30 p-6 overflow-y-auto hidden lg:block"><div class="sticky top-0 space-y-8"><div class=space-y-4><h3 class="font-bold flex items-center gap-2 text-foreground/80"> Parâmetros</h3><div class="space-y-4 p-4 bg-background border rounded-xl shadow-sm"><div class=space-y-3><div class="flex justify-between items-center"><label class="text-sm font-medium">Temperatura</label><span class="text-xs font-mono bg-secondary px-2 py-1 rounded"></span></div><input type=range min=0 max=2 step=0.1 class="w-full h-1.5 bg-secondary rounded-lg appearance-none cursor-pointer accent-primary"></div><div class="h-px bg-border/50"></div><div class=space-y-3><div class="flex justify-between items-center"><label class="text-sm font-medium">Max Tokens</label><span class="text-xs font-mono bg-secondary px-2 py-1 rounded"></span></div><input type=range min=100 step=100 class="w-full h-1.5 bg-secondary rounded-lg appearance-none cursor-pointer accent-primary"></div></div></div><div class=space-y-4><h3 class="font-bold flex items-center gap-2 text-foreground/80"> Output</h3><div class="space-y-3 p-4 bg-background border rounded-xl shadow-sm"><div class="flex items-center justify-between group"><div class=space-y-0.5><label class="text-sm font-medium">JSON Mode</label><p class="text-xs text-muted">Estrutura rígida</p></div><input type=checkbox class="toggle toggle-sm toggle-primary"></div></div></div><div class="p-4 bg-yellow-500/5 border border-yellow-500/10 rounded-xl space-y-2"><div class="flex items-center gap-2 text-yellow-600 font-bold text-sm"> Best Practice</div><p class="text-xs text-muted leading-relaxed">Use <strong>System Instructions</strong> para definir o comportamento base antes de iniciar a conversa. Isso economiza tokens e melhora a consistência.'),Tt=g('<button class="p-4 rounded-xl border border-border/50 hover:border-primary/50 hover:bg-secondary/50 transition-all text-left group"><div class="font-semibold text-sm group-hover:text-primary transition-colors mb-1 flex items-center gap-2"> </div><div class="text-xs text-muted line-clamp-2">'),It=g('<div class="mt-3 pt-2 border-t border-border/10">'),jt=g('<div><div><div class="flex items-center gap-2 mb-2 opacity-70 border-b border-border/10 pb-2"><span class="text-xs font-bold uppercase tracking-wider"></span><span class="text-[10px] ml-auto"></span></div><div class="markdown-body text-sm leading-relaxed"style=background:transparent><pre class="whitespace-pre-wrap font-sans bg-transparent border-0 p-0 m-0 text-current">');function Jt(){const[d,C]=i([]),[S,I]=i(""),[j,G]=i(""),[h,Q]=i(!1);let E;const[Se,k]=i(!1),[D,U]=i(!1),[M,K]=i(1),[z,X]=i(2048),[P,ke]=i(!1),[Me,Et]=i(!1),[Y,W]=i(null),[Dt,ze]=i(null),[Z,H]=i(0),[Pt,qt]=i(null),[Rt,Ft]=i(""),Te=[{title:"Análise Financeira",system:"Você é um analista financeiro sênior. Responda de forma concisa e use tabelas markdown quando apropriado.",prompt:"Analise o ROI de uma campanha de marketing que custou R$ 50.000 e gerou R$ 120.000 em vendas."},{title:"SQL Expert",system:"Você é um DBA especialista em SQL Server. Forneça apenas o código SQL otimizado sem explicações verbosas.",prompt:"Escreva uma query para encontrar produtos que não venderam nos últimos 6 meses."},{title:"Python Data",system:"Você é um engenheiro de dados Python. Prefira a biblioteca Polars sobre Pandas.",prompt:"Crie um script para ler um arquivo Parquet e filtrar linhas onde 'status' é 'error'."}];ot(async()=>{try{const a=await $e.get("/playground/info");W(a.data),a.data.default_max_tokens&&X(a.data.default_max_tokens),a.data.default_temperature&&K(a.data.default_temperature)}catch(a){console.error("Erro ao carregar info do modelo:",a)}}),dt(()=>{d()&&setTimeout(()=>E.scrollIntoView({behavior:"smooth"}),100)});const Ie=async a=>{if(a?.preventDefault(),!S().trim()||h())return;const r={id:Date.now().toString(),role:"user",content:S(),timestamp:new Date().toISOString()};C([...d(),r]),I(""),Q(!0),await je([...d(),r])},je=async a=>{try{const r=await $e.post("/playground/chat",{message:a[a.length-1].content,system_instruction:j(),history:a.slice(0,-1).map(x=>({role:x.role,content:x.content,timestamp:x.timestamp})),temperature:M(),max_tokens:z(),json_mode:P(),stream:Me()}),b={id:(Date.now()+1).toString(),role:"assistant",content:r.data.response,timestamp:r.data.metadata.timestamp};C([...a,b]),W(r.data.model_info),ze(r.data.cache_stats),H(r.data.metadata.response_time)}catch(r){const b={id:Date.now().toString(),role:"assistant",content:`❌ **Erro na execução**: ${r.response?.data?.detail||r.message}`,timestamp:new Date().toISOString()};C([...a,b])}finally{Q(!1)}},Ee=()=>{confirm("Deseja limpar o histórico e começar do zero?")&&(C([]),H(0))},De=a=>{G(a.system),I(a.prompt),U(!0)},ee=()=>`
import requests

url = "http://localhost:8000/api/v1/playground/chat"
headers = {"Authorization": "Bearer YOUR_TOKEN"}
payload = {
    "system_instruction": "${j().replace(/"/g,'\\"')}",
    "message": "${d().length>0?d()[d().length-1].content.replace(/"/g,'\\"'):""}",
    "history": ${JSON.stringify(d().slice(0,-1).map(r=>({role:r.role,content:r.content}))).replace(/"/g,'\\"')},
    "temperature": ${M()},
    "max_tokens": ${z()},
    "json_mode": ${P()}
}

response = requests.post(url, json=payload, headers=headers)
print(response.json())
    `.trim();return(()=>{var a=zt(),r=a.firstChild,b=r.firstChild,x=b.firstChild,Pe=x.firstChild,qe=b.nextSibling,q=qe.firstChild,te=q.firstChild,Re=te.firstChild,Fe=Re.nextSibling,R=q.nextSibling,se=R.firstChild,Le=se.firstChild,Oe=Le.nextSibling,F=R.nextSibling,Ae=F.firstChild,Ve=r.nextSibling,ae=Ve.firstChild,L=ae.firstChild,O=L.firstChild,re=O.firstChild,Je=re.firstChild,$=L.nextSibling,y=$.firstChild,Ne=$.nextSibling,ie=Ne.firstChild,A=ie.firstChild,le=A.nextSibling,V=le.firstChild,ne=le.nextSibling,Be=ae.nextSibling,Ge=Be.firstChild,oe=Ge.firstChild,J=oe.firstChild,Qe=J.firstChild,Ue=J.nextSibling,de=Ue.firstChild,ce=de.firstChild,Ke=ce.firstChild,Xe=Ke.nextSibling,pe=ce.nextSibling,Ye=de.nextSibling,We=Ye.nextSibling,me=We.firstChild,Ze=me.firstChild,He=Ze.nextSibling,N=me.nextSibling,ue=oe.nextSibling,B=ue.firstChild,et=B.firstChild,tt=B.nextSibling,st=tt.firstChild,at=st.firstChild,ge=at.nextSibling,rt=ue.nextSibling,fe=rt.firstChild,it=fe.firstChild;t(x,s(ct,{class:"text-primary"}),Pe),t(q,s(_e,{size:16,class:"text-blue-500"}),te),t(Fe,(()=>{var e=xe(()=>Z()>0);return()=>e()?`${Z().toFixed(2)}s`:"--"})()),t(R,s(Ce,{size:16,class:"text-purple-500"}),se),t(Oe,()=>Y()?.model||"Gemini 3.0 Flash"),F.$$click=()=>k(!0),t(F,s(ve,{size:16}),Ae),O.$$click=()=>U(!D()),t(re,s(we,{size:14}),Je),t(O,(()=>{var e=xe(()=>!!D());return()=>e()?s(_t,{size:14}):s(ht,{size:14})})(),null),t(L,s(v,{get when(){return D()},get children(){var e=Ct(),l=e.firstChild;return l.$$input=n=>G(n.currentTarget.value),f(()=>l.value=j()),e}}),null),t($,s(v,{get when(){return d().length===0},get children(){var e=St(),l=e.firstChild,n=l.nextSibling,c=n.nextSibling;return t(l,s(pt,{size:64,class:"opacity-20"})),t(c,s(he,{each:Te,children:m=>(()=>{var u=Tt(),p=u.firstChild,_=p.firstChild,o=p.nextSibling;return u.$$click=()=>De(m),t(p,s(yt,{size:14}),_),t(p,()=>m.title,null),t(o,()=>m.system),u})()})),e}}),y),t($,s(he,{get each(){return d()},children:e=>(()=>{var l=jt(),n=l.firstChild,c=n.firstChild,m=c.firstChild,u=m.nextSibling,p=c.nextSibling,_=p.firstChild;return t(m,()=>e.role==="user"?"User":"Model"),t(u,()=>new Date(e.timestamp).toLocaleTimeString()),t(_,()=>e.content),t(n,s(v,{get when(){return e.role==="assistant"},get children(){var o=It();return t(o,s(mt,{get messageText(){return e.content},get messageId(){return e.id}})),o}}),null),f(o=>{var w=`flex ${e.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2 group`,T=`max-w-[85%] rounded-2xl p-5 shadow-sm relative ${e.role==="user"?"bg-primary/10 border border-primary/20 text-foreground rounded-tr-none":"bg-card border text-card-foreground rounded-tl-none"}`;return w!==o.e&&ye(l,o.e=w),T!==o.t&&ye(n,o.t=T),o},{e:void 0,t:void 0}),l})()}),y),t($,s(v,{get when(){return h()},get children(){return kt()}}),y);var be=E;return typeof be=="function"?bt(be,y):E=y,ie.addEventListener("submit",Ie),A.$$click=Ee,t(A,s(ut,{size:20})),V.$$input=e=>I(e.currentTarget.value),t(ne,s(v,{get when(){return!h()},get fallback(){return s(_e,{size:20,class:"animate-spin"})},get children(){return s($t,{size:20})}})),t(J,s(we,{size:18}),Qe),t(Xe,()=>M().toFixed(1)),pe.$$input=e=>K(parseFloat(e.currentTarget.value)),t(He,z),N.$$input=e=>X(parseInt(e.currentTarget.value)),t(B,s(Ce,{size:18}),et),ge.addEventListener("change",e=>ke(e.currentTarget.checked)),t(fe,s(gt,{size:16}),it),t(a,s(v,{get when(){return Se()},get children(){var e=Mt(),l=e.firstChild,n=l.firstChild,c=n.firstChild,m=c.firstChild,u=c.nextSibling,p=n.nextSibling,_=p.firstChild,o=p.nextSibling,w=o.firstChild,T=w.nextSibling;return t(c,s(ve,{size:20}),m),u.$$click=()=>k(!1),t(u,s(ft,{size:18})),t(_,ee),w.$$click=()=>k(!1),T.$$click=()=>{navigator.clipboard.writeText(ee()),k(!1)},e}}),null),f(e=>{var l=h(),n=h()||!S().trim(),c=Y()?.max_tokens_limit||8192;return l!==e.e&&(V.disabled=e.e=l),n!==e.t&&(ne.disabled=e.t=n),c!==e.a&&xt(N,"max",e.a=c),e},{e:void 0,t:void 0,a:void 0}),f(()=>V.value=S()),f(()=>pe.value=M()),f(()=>N.value=z()),f(()=>ge.checked=P()),a})()}vt(["click","input"]);export{Jt as default};
